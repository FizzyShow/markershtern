## Context: 

Микросервис отвечающий за баланс пользователя(принимает запросы по gRPC, на основе этих запросов взаимодействует с БД).

## Decision

Микросервис будет подписан на определенное событие, которое будет срабатывать при регистрации пользователя. В данном случае в БД будет создаваться таблица отвечающая за баланс пользователя(к примеру: id пользователя, USD = 0, EUR = 0, RUB = 0). 

БД микросервиса будет хранить информацию о текущем балансе пользователя.  Баланс пользователя, к примеру будет хранится в следующих валютах(USD, EUR, RUB).


Микросервис будет представлять следующую структуру папок: Services, Abstractions, Model, Dto, Protos:

- Папка Services содержит содержит следующие данные:

1. Директорию Abstractions, куда будут вложены все интерфейсы взаимодействия с данными отвечающие за баланс пользователя.

2. Классы, которые реализуют интерфейсы описаные в папке Abstractions.


- Папка Model:

1. Содержит модели БД

2. Папка Dto, в которой будут модель предназначеная для ответа (ResponseDto
{
 - bool IsSuccess (отвечает успешность запроса)
 - object Result (отвечает за содержание данных)
 - List<string> ErrorMessage (отвечает за содержание ошибкок)
})

- Папка Protos:

1. Будет содержать .proto файлы, в которых будут описаны модели необходимые для принятие запроса - ответа.



Микросервис будет содержать следующий функционал:

Post method:
1.Инкремент баланса пользователя, запрос который принимает следующие данные:
(DTO
{
 - id пользователя, 
 - тип валюты, 
 - сумма пополнения
}). 

Post method:
2.Конвертация баланса пользователя, запрос который принимает следующие данные:
(DTO
{
 - id пользователя, 
 - тип валюты(с которой будем конвертировать),
 - тип валюты(куда будем конвертировать
}).

Post method:
3.Декремент баланса пользователя, запрос который принимает следующие данные:
(Dto
{
 - id пользователя,
 - тип валюты,
 - сумма списания
}).

Get method(return DTO):
1.Получение текущего баланса пользователя, запрос который принимает следующие данные:(id пользователя, тип валюты).



## Status

Предложено




